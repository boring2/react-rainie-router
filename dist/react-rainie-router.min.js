!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t.reactRainieRouter=e(t.React)}(this,function(t){"use strict";function e(t,e){var n=arguments.length<=2||void 0===arguments[2]?m:arguments[2],r=/(?:\?([^#]*))?(#.*)?$/,i=t.match(r),a={},u=void 0;if(i&&i[1])for(var p=i[1].split("&"),c=0;c<p.length;c++){var f=p[c].split("=");a[decodeURIComponent(f[0])]=decodeURIComponent(f.slice(1).join("="))}t=o(t.replace(r,"")),e=o(e||"");for(var s=Math.max(t.length,e.length),l=0;l<s;l++)if(e[l]&&":"===e[l].charAt(0)){var h=e[l].replace(/(^\:|[+*?]+$)/g,""),d=(e[l].match(/[+*?]+$/)||m)[0]||"",v=~d.indexOf("+"),y=~d.indexOf("*"),g=t[l]||"";if(!g&&!y&&(d.indexOf("?")<0||v)){u=!1;break}if(a[h]=decodeURIComponent(g),v||y){a[h]=t.slice(l).map(decodeURIComponent).join("/");break}}else if(e[l]!==t[l]){u=!1;break}return(n.default===!0||u!==!1)&&a}function n(t,e){var n=t.props||m,o=e.props||m;if(n.default)return 1;if(o.default)return-1;var i=r(n.path)-r(o.path);return i||n.path.length-o.path.length}function o(t){return i(t).split("/")}function r(t){return(i(t).match(/\/+/g)||"").length}function i(t){return t.replace(/(^\/+|\/+$)/g,"")}function a(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function u(t){var e=arguments.length<=1||void 0===arguments[1]?"push":arguments[1];R&&R[e]?R[e](t):"undefined"!=typeof history&&history[e+"State"]&&history[e+"State"](null,null,t)}function p(){var t=void 0;return t=R&&R.getCurrentLocation?R.getCurrentLocation():"undefined"!=typeof location?location:j,""+(t.pathname||"")+(t.search||"")}function c(t){E.push(t)}function f(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return Promise.all(E.map(function(e){return e(t)})).then(function(){return"string"!=typeof t&&t.url&&(e=t.replace,t=t.url),u(t,e?"replace":"push"),s(t)}).catch(function(){})}function s(t){var e=!1;return P.forEach(function(n){n.routeTo(t)===!0&&(e=!0)}),e}function l(t){if(t&&t.getAttribute){var e=t.getAttribute("href")||t.getAttribute("to"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return f(e)}}function h(t){if(0===t.button)return l(t.currentTarget||t.target||this),d(t)}function d(t){return t&&(t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault()),!1}t="default"in t?t.default:t;var m={},v=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},g=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},b=function(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},C=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},O=function(e){function n(){var t,o,r;v(this,n);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return t=o=C(this,e.call.apply(e,[this].concat(a))),o.state={SplitComponent:void 0},r=t,C(o,r)}return g(n,e),n.prototype.componentWillMount=function(){var t=this,e=this.props,n=e.component,o=e.getComponent;if(!n&&o){var r=o();a(r)&&r.then(function(e){t.setState({SplitComponent:e})})}},n.prototype.render=function(){var e=this.props,n=e.component,o=(e.getComponent,b(e,["component","getComponent"])),r=this.state.SplitComponent;return n?t.createElement(n,o):r?t.createElement(r,o):null},n}(t.Component);O.PropTypes={component:t.PropTypes.node,getComponent:t.PropTypes.func};var R=null,P=[],j={},E=[];"function"==typeof addEventListener&&addEventListener("popstate",function(){return s(p())});var w=function(o){function r(t){v(this,r);var e=C(this,o.call(this,t));return t.history&&(R=t.history),e.state={url:e.props.url||p()},e}return g(r,o),r.prototype.shouldComponentUpdate=function(t,e){return t.url!==this.props.url||t.onChange!==this.props.onChange||e.url!==this.state.url},r.prototype.componentWillMount=function(){P.push(this)},r.prototype.componentWillUnmount=function(){P.splice(P.indexOf(this),1)},r.prototype.routeTo=function(t){return this._didRoute=!1,this.setState({url:t}),this._didRoute},r.prototype.render=function(){for(var o=this.props,r=o.children,i=o.onChange,a=this.state.url,u=null,p=t.Children.toArray(r).sort(n),c=0;c<p.length;c++){var f=p[c],s=f.props,l=s.path,h=e(a,l,s);if(h){u=t.cloneElement(f,y({},f.props,{url:a,matches:h})),this._didRoute=!0;break}}var d=this.previousUrl;return a!==d&&(this.previousUrl=a,"function"==typeof i&&i({url:a,previous:d,router:this})),u},r}(t.Component),x=function(n){var o=n.children,r=n.activeClassName,i=b(n,["children","activeClassName"]);return t.createElement("a",y({},i,{className:e(i.href||i.to,p())?r+" "+i.className:i.className,onClick:h}),o,">")};return w.listenBefore=c,w.route=f,w.Router=w,w.Route=O,w.Link=x,w});
//# sourceMappingURL=react-rainie-router.min.js.map